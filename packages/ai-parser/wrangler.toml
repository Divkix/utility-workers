# AI Schema Parser Worker
# Parses text into structured JSON using AI models via OpenRouter

name = "ai-parser-worker"
main = "src/index.ts"
compatibility_date = "2026-01-22"
compatibility_flags = ["nodejs_compat"]

# Minify for production
minify = true

# Smart placement for optimal performance
[placement]
mode = "smart"

# Observability
[observability]
enabled = true
head_sampling_rate = 0.1

[observability.logs]
enabled = true
invocation_logs = true

# Environment variables (set via wrangler secret put)
# Required secrets:
#   wrangler secret put CF_AI_GATEWAY_ACCOUNT_ID
#   wrangler secret put CF_AI_GATEWAY_ID
#   wrangler secret put CF_AIG_AUTH_TOKEN
#
# Or for direct OpenRouter access:
#   wrangler secret put OPENROUTER_API_KEY
